{% load static %}
<!DOCTYPE html>
<html>
   <title>
       RecipeApp Home
   </title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  
   <style>
      body {
         background: rgb(253,253,253);
         background: linear-gradient(130deg, rgba(253,253,253,1) 23%, rgba(233,223,222,0.989233193277311) 60%);
      }
  
      h1 {
         text-align: center;
         font-family:Georgia, 'Times New Roman', Times, serif;
         
      } 
      .main-img {
         display: block;
         margin-left: auto;
         margin-right: auto;
      }
      h2 {
         text-align: center;
         font-family:cursive;
      }
      p {
         text-align: center;
         font-family:Georgia, 'Times New Roman', Times, serif
      }
      .border {
         color: lightgray;
      }
      a {
         text-decoration: none;
         color: black;
         
      }
      .modal-title {
         display: flex;
         justify-content: center;
         font-size: larger;
      }
      .modal-fade {
         display: flex;
         border-radius: 5%;
         width: auto;
         height: auto;
         justify-content: center;
         padding: 50px;
         margin-bottom: 50px;
         box-shadow: 0 6px 6px rgba(0, 0, 0, 0.6);
        
        
      }
     
     
      .modal-header {
         display: flex;
         justify-content: space-between;
         
      }
      .btn {
         font-family:Georgia, 'Times New Roman', Times, serif;
         font-size:medium;
         cursor: pointer;
         border: none;
         background-color: transparent;
         height: 40px;
         width: auto;
         color: black;
         box-shadow: 0 6px 6px rgba(0, 0, 0, 0.6);
         padding: 10px;
      }
     .search {
      cursor: pointer;
            border: none;
            background-color: transparent;
            height: 25px;
            width: 75px;
            color: black;
            box-shadow: 0 6px 6px rgba(0, 0, 0, 0.6);
    }
     
   .close {
   
            cursor: pointer;
            border: none;
            background-color: transparent;
            height: 25px;
            width: 25px;
            color: black;
            box-shadow: 0 6px 6px rgba(0, 0, 0, 0.6);
        }
      .form {
         display: flex;
         flex-direction: column;
         align-items: center;
      }
   
   </style>
   <body>
    {% include './navbar.html' %}
    <br/>
    

      <p class="border">&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;</p>
      <a href ="{%url 'recipes:list' %}"> <h2>The Best Vegan Recipes</h2> </a>

         <p>Simple and easy to follow recipes for your transition to a healthy, vegan lifestyle.</p>
         <p><strong>Vegan ~~~~~~~ Favorites</strong></p>
                <!-- Button to trigger modal -->
    <button type="button" class="btn btn-dark" id="button" data-toggle="modal" data-target="#searchModal">
      Search for recipes
    </button>

       <!-- Modal -->
       <div class="modal-fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true" style="display: none;">
         <div class="modal-dialog" role="document">
             <div class="modal-content">
                 <div class="modal-header">
                     <h5 class="modal-title" id="searchModalLabel">Search for recipes</h5>
                     <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                     
                 </div>
                 <div class="modal-body">

      
      </div>
      </div>
      </div>
      </div>
     
   
      <img class ="main-img" src="{% static 'recipes/images/vegan-granola.jpg' %}" alt="home" width="600" height="675">
     <br>
   
      <p class="border">&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;&#9788;</p>

  <script>
        document.addEventListener('DOMContentLoaded', function () {
        // Get the modal element
        const modal = document.getElementById('searchModal');

        // Get the button that opens the modal
        const btn = document.getElementById('button');

        // Get the <span> element that closes the modal
        const span = document.getElementsByClassName('close')[0];

        // When the user clicks the button, open the modal
        btn.onclick = function () {
            modal.style.display = 'block';
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = 'none';
        }

        // When the user clicks anywhere outside of the modal, close it
      //  window.on('submit', function (event) {
        //    if (event.target == modal) {
          //      modal.style.display = 'none';
            //}
        //})
         // Prevent form submission from closing the modal
         document.querySelector('#searchForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent default form submission

            const formData = new FormData(this); // Get form data

// Use fetch API to send form data to the server
fetch("{%url 'recipes:list' %}", {
    method: 'POST',
    body: formData
})
.then(response => {
    if (response.ok) {
        // Optionally display a success message to the user
        alert('Search successful!');
        // You can also reload the page or update the UI as needed
    } else {
        throw new Error('Search failed'); // Handle other response statuses if needed
    }
})
.catch(error => {
    console.error('Error:', error);
    // Optionally display an error message to the user
    alert('An error occurred while processing your search.');
});
           
        });
      })
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

   </body>
</html>